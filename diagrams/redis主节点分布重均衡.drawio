<mxfile host="app.diagrams.net" modified="2023-06-14T07:55:30.479Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36" etag="Y1t2WIWaOsVp9Wx4vLVh" version="21.2.9" type="github">
  <diagram id="rYdwiMb5jvszhZctyrXV" name="第 1 页">
    <mxGraphModel dx="1335" dy="1033" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1920" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="m2RrI7nNt6jqGmCJHyVY-14" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="931" y="410" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-32" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;dashed=1;" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="m2RrI7nNt6jqGmCJHyVY-15" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="529.6666666666667" y="1156.6666666666667" as="targetPoint" />
            <Array as="points">
              <mxPoint x="515" y="409" />
              <mxPoint x="515" y="1157" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-33" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0.81;entryY=0.547;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="m2RrI7nNt6jqGmCJHyVY-18" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1346.3333333333335" y="1165.0000000000002" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1381" y="409" />
              <mxPoint x="1381" y="1165" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="YQscOVflWYW1QB9K6YFz-41" value="redis-operator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;" parent="1" vertex="1">
          <mxGeometry x="828.75" y="373" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-14" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="634" y="587" width="593" height="256" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-1" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="598" y="528" width="159" height="374" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-6" value="redis集群" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="849.5" y="532" width="162" height="372" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-10" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1085" y="532" width="179" height="371" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-2" value="slave2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1122" y="760" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-4" value="slave1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="647" y="604" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-5" value="node1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="657" y="537" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-7" value="master0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="896.5" y="604" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-8" value="master2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="899.5" y="743" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-9" value="node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="909.5" y="540" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-11" value="slave0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1122" y="588" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-12" value="master1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1122" y="675" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-13" value="node3" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1138.5" y="543" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-15" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="634" y="1017" width="593" height="256" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-16" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="598" y="958" width="159" height="374" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-17" value="redis集群" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="849.5" y="962" width="162" height="372" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-18" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1085" y="962" width="179" height="371" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-19" value="slave2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1122" y="1190" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-20" value="master1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="647" y="1034" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-21" value="node1" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="657" y="967" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-22" value="slave0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="896.5" y="1034" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-23" value="master2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="899.5" y="1173" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-24" value="node2" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="909.5" y="970" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-25" value="master0" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1122" y="1018" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-26" value="slave1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="1122" y="1105" width="80" height="80" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-27" value="node3" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1138.5" y="973" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-28" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;1 检测发现master0和master2都调度到了node2节点，该节点存在&lt;br&gt;过半master，有宕机风险&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="939" y="452" width="188" height="75" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-29" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;2 尝试进行主从切换，直至master分布均衡，这里将slave0和slave1切成主&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="518" y="449" width="221" height="75" as="geometry" />
        </mxCell>
        <mxCell id="m2RrI7nNt6jqGmCJHyVY-30" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;3 3个master已均衡分布&lt;br&gt;在3台node节点，退出&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1376" y="449" width="166" height="75" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
