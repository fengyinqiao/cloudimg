<mxfile host="app.diagrams.net" modified="2023-06-14T03:59:29.987Z" agent="Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36" etag="QZuvXlnAA7Z-Jr74PRpX" version="21.2.9" type="github">
  <diagram id="rYdwiMb5jvszhZctyrXV" name="第 1 页">
    <mxGraphModel dx="1335" dy="1033" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1920" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="k7kp1MV-_mNu26BSV135-13" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="646" y="1897" width="501" height="269" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-74" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;strokeColor=default;fillColor=none;" parent="1" vertex="1">
          <mxGeometry x="1479" y="193" width="888" height="669" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-15" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="605" y="391" width="591" height="332" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-1" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="655" y="442" width="463" height="253" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-35" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="618" y="979" width="573" height="495" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-55" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="594" y="1849" width="854" height="689" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="k7kp1MV-_mNu26BSV135-29" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="YQscOVflWYW1QB9K6YFz-41" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1008.4444444444443" y="217.66666666666663" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1008" y="218" />
              <mxPoint x="1008" y="236" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.004;exitY=0.87;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;exitPerimeter=0;" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="fc0Et_haitifpb5bSG0c-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1227" y="263" />
              <mxPoint x="1227" y="515" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="YQscOVflWYW1QB9K6YFz-41" value="客户端（cluster模式）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="747.25" y="200" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-2" target="k7kp1MV-_mNu26BSV135-29" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="738" y="453" />
              <mxPoint x="873" y="453" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-2" value="master0&lt;br&gt;IP:192.168.0.2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="666" y="468" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-3" value="slave0&lt;br&gt;IP:192.168.0.3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="668" y="593" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-4" value="master1&lt;br&gt;IP:192.168.0.4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="855" y="473" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-5" value="slave1&lt;br&gt;IP:192.168.0.5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="857" y="598" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-6" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1228" y="513" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1074" y="539" />
              <mxPoint x="1228" y="539" />
              <mxPoint x="1228" y="514" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-6" value="master2&lt;br&gt;IP:192.168.0.6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1003" y="473" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-7" value="slave2&lt;br&gt;IP:192.168.0.7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1005" y="598" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-13" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;6 客户端与redis的PodIP网络不通，无法建立连接&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1230" y="526" width="135" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-16" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1127.25" y="398" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-27" target="fc0Et_haitifpb5bSG0c-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-27" value="客户端（单节点模式）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="787.25" y="819" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-28" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="664.25" y="1201" width="463" height="253" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-29" value="master0&lt;br&gt;IP:192.168.0.2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="675.25" y="1226" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-30" value="slave0&lt;br&gt;IP:192.168.0.3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="677.25" y="1351" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-31" value="master1&lt;br&gt;IP:192.168.0.4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="864.25" y="1231" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-32" value="slave1&lt;br&gt;IP:192.168.0.5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="866.25" y="1356" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-33" value="master2&lt;br&gt;IP:192.168.0.6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1012.25" y="1231" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-34" value="slave2&lt;br&gt;IP:192.168.0.7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1014.25" y="1356" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-36" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1122" y="985" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-37" target="fc0Et_haitifpb5bSG0c-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.639;entryY=0.983;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-37" target="fc0Et_haitifpb5bSG0c-27" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-37" value="LB&lt;br&gt;externalIP:10.0.0.2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="838" y="986" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.489;entryY=0.441;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-38" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="898.1969999999999" y="1201.2949999999998" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-38" target="fc0Et_haitifpb5bSG0c-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-38" value="proxy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="838" y="1085" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-39" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;1 客户端连接LB&lt;br&gt;发送redis命令&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="806" y="916" width="90" height="24" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-40" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;2 proxy进行key的哈希&lt;br&gt;和命令转发&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="767" y="1165" width="132" height="17" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.486;entryY=-0.005;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-47" target="k7kp1MV-_mNu26BSV135-13" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-47" target="fc0Et_haitifpb5bSG0c-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1094" y="1638.111111111111" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1055" y="1638" />
              <mxPoint x="1055" y="1657" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-47" value="客户端（cluster模式）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="779.25" y="1620" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.001;exitY=0.177;exitDx=0;exitDy=0;endArrow=none;endFill=0;startArrow=classic;startFill=1;dashed=1;exitPerimeter=0;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-48">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1191.6666666666667" y="1995.3333333333335" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1192" y="2259" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-48" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="646.75" y="2203.5" width="492" height="313" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-49" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="540" y="2295" as="targetPoint" />
            <Array as="points">
              <mxPoint x="658" y="2318" />
              <mxPoint x="540" y="2318" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-49" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;master0&lt;br&gt;addr:192.168.0.2:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6379&lt;/p&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="657.75" y="2229.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-56" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1385" y="1845" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-60" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;slave0&lt;br&gt;addr:192.168.0.3:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6380&lt;/p&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="657.75" y="2370.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1225" y="2290" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1111" y="2327" />
              <mxPoint x="1225" y="2327" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-61" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;master2&lt;br&gt;addr:192.168.0.6:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6579&lt;/p&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="980.5" y="2229.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-62" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;slave2&lt;br&gt;addr:192.168.0.7:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6580&lt;/p&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="980.5" y="2370.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-63" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;master1&lt;br&gt;addr:192.168.0.4:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6479&lt;/p&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="817.75" y="2229.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-64" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;slave1&lt;br&gt;Addr:192.168.0.5:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6480&lt;/p&gt;" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="817.75" y="2370.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-65" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1056.75" y="2207.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-66" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;1 operator创建main-LB和sub- LB service，根据VIP和port设置redis的clusterAnnounceAddr&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1198" y="1976" width="174" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-67" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;5 客户端计算key的哈希和slot，根据集群拓扑确定请求节点&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1062" y="1639" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-68" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;6 客户端与请求节点建立连接，发送命令&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1230" y="2107" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-69" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;7 客户端与redis的clusterAnnounceAddr建立连接，redis返回命令响应&lt;br&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1223" y="2313" width="151" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-72" target="fc0Et_haitifpb5bSG0c-75" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-72" target="fc0Et_haitifpb5bSG0c-76" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="888" y="1998" />
              <mxPoint x="888" y="1998" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-72" target="fc0Et_haitifpb5bSG0c-78" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="888" y="1990" />
              <mxPoint x="1038" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-72" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;main-LB&lt;br&gt;VIP:10.0.0.1&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="827.75" y="1908" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-75" target="fc0Et_haitifpb5bSG0c-49" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="542" y="2041" />
              <mxPoint x="542" y="2295" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-75" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;sub-LB-master0&lt;br&gt;port:6379&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="680.88" y="2011" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-76" target="fc0Et_haitifpb5bSG0c-63" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="813" y="2041" />
              <mxPoint x="813" y="2172" />
              <mxPoint x="883" y="2172" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-76" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;sub-LB-master1&lt;br&gt;port:6479&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="822.88" y="2011" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="fc0Et_haitifpb5bSG0c-78" target="fc0Et_haitifpb5bSG0c-61" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1222" y="2039" />
              <mxPoint x="1222" y="2295" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-78" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;sub-LB-master2&lt;br&gt;port:6579&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="978.13" y="2009" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-79" target="fc0Et_haitifpb5bSG0c-60" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="625" y="2122" />
              <mxPoint x="625" y="2436" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-79" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;sub-LB-slave0&lt;br&gt;p&lt;span style=&quot;background-color: initial;&quot;&gt;ort:6380&lt;/span&gt;&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="682.88" y="2092" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-80" target="fc0Et_haitifpb5bSG0c-64" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-80" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;sub-LB-slave1&lt;br&gt;port:6480&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="824.88" y="2092" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-81" target="fc0Et_haitifpb5bSG0c-62" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1161" y="2120" />
              <mxPoint x="1161" y="2436" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-81" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;sub-LB-slave2&lt;br&gt;port:6580&lt;/p&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="980.13" y="2090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.543;entryY=1.016;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="k7kp1MV-_mNu26BSV135-13" target="fc0Et_haitifpb5bSG0c-47" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="900" y="1897" />
              <mxPoint x="900" y="1861" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-14" value="NLB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1078.75" y="1906" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.999;entryY=0.369;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="k7kp1MV-_mNu26BSV135-17" target="k7kp1MV-_mNu26BSV135-13" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1191" y="1921" />
              <mxPoint x="1191" y="1996" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-17" value="redis-operator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1218.5" y="1885" width="134" height="72" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-21" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;3 redis返回集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="474" y="2152" width="72" height="14" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-27" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;8 客户端接收命令响应&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="902.12" y="1802" width="136.75" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.169;entryY=0.238;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="k7kp1MV-_mNu26BSV135-29" target="fc0Et_haitifpb5bSG0c-15" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.572;entryY=1.002;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="k7kp1MV-_mNu26BSV135-29" target="YQscOVflWYW1QB9K6YFz-41" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-29" value="NodePort或LB" style="text;html=1;strokeColor=default;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="828" y="378" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-32" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;1 客户端获取redis集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="759" y="311" width="98" height="40" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-35" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;3&amp;nbsp; 客户端缓存redis集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="875.75" y="319" width="82.25" height="24" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-36" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;2 redis返回集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="750" y="460" width="69" height="31" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-38" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;4 客户端计算key的哈希和slot，&lt;span style=&quot;background-color: initial;&quot;&gt;根据集群拓扑确定请求节点&lt;/span&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1014.63" y="200" width="112.37" height="43" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-41" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;5 客户端与请求节点建立连接，发送命令&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1230" y="342" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-46" value="" style="endArrow=classic;html=1;rounded=0;dashed=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.571;exitY=0.001;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="fc0Et_haitifpb5bSG0c-28" target="fc0Et_haitifpb5bSG0c-38" edge="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="907" y="1218" as="sourcePoint" />
            <mxPoint x="957" y="1168" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-47" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;1 LB转发流量至proxy&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="767" y="1056" width="124" height="24" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-48" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;3 redis返回命令响应&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="934.5" y="1165" width="72" height="17" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-49" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;5 客户端接收redis命令响应&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="933.25" y="919.5" width="79" height="17" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-51" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1567" y="482" width="591" height="332" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-50" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1617" y="533" width="463" height="253" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="k7kp1MV-_mNu26BSV135-55" target="k7kp1MV-_mNu26BSV135-57" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1820" y="469" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="k7kp1MV-_mNu26BSV135-55" target="k7kp1MV-_mNu26BSV135-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1970.4444444444443" y="308.66666666666663" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1970" y="309" />
              <mxPoint x="1970" y="327" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.004;exitY=0.87;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;exitPerimeter=0;" parent="1" source="k7kp1MV-_mNu26BSV135-55" target="k7kp1MV-_mNu26BSV135-62" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2189" y="354" />
              <mxPoint x="2189" y="606" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-55" value="客户端（cluster模式）&lt;br&gt;IP: 192.168.0.8" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1709.25" y="291" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.568;entryY=0.995;entryDx=0;entryDy=0;dashed=1;entryPerimeter=0;" parent="1" source="k7kp1MV-_mNu26BSV135-57" target="k7kp1MV-_mNu26BSV135-55" edge="1">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1687" y="571" />
              <mxPoint x="1687" y="544" />
              <mxPoint x="1835" y="544" />
            </Array>
            <mxPoint x="1835" y="499" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-57" value="master0&lt;br&gt;IP:192.168.0.2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1628" y="559" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-58" value="slave0&lt;br&gt;IP:192.168.0.3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1630" y="684" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-59" value="master1&lt;br&gt;IP:192.168.0.4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1817" y="564" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-60" value="slave1&lt;br&gt;IP:192.168.0.5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1819" y="689" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;dashed=1;" parent="1" source="k7kp1MV-_mNu26BSV135-62" edge="1">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2190" y="604" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2036" y="630" />
              <mxPoint x="2190" y="630" />
              <mxPoint x="2190" y="605" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-62" value="master2&lt;br&gt;IP:192.168.0.6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1965" y="564" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-63" value="slave2&lt;br&gt;IP:192.168.0.7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1967" y="689" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-64" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;6 客户端与redis的PodIP建立连接，redis返回命令响应&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="2194" y="617" width="152" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-65" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="2089.25" y="489" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-75" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;subnet&lt;br&gt;（BGP或OVS实现）&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="2259" y="198" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-79" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="2001.75" y="534" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-80" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1040.13" y="445" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-81" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="1050.5" y="1200" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-1" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;1 客户端获取redis集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1719" y="402" width="98" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-2" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;2 redis返回集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1719" y="552" width="69" height="31" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-3" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;3&amp;nbsp; 客户端缓存redis集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1843" y="410" width="82.25" height="24" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-4" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;4 客户端计算key的哈希和slot，&lt;span style=&quot;background-color: initial;&quot;&gt;根据集群拓扑确定请求节点&lt;/span&gt;&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1975.56" y="295" width="112.37" height="43" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-5" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;5 客户端与请求节点建立连接，发送命令&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2195" y="412" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-6" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;4 proxy返回命令响应&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="936" y="1060" width="120.75" height="17" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-8" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;2 客户端获取redis集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="801" y="1730" width="98" height="40" as="geometry" />
        </mxCell>
        <mxCell id="8dxpS0PHY5nWG-0NEdOh-9" value="&lt;p style=&quot;line-height: 150%;&quot;&gt;4 客户端缓存redis集群拓扑&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="908" y="1738" width="86" height="24" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
