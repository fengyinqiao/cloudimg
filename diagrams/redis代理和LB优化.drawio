<mxfile host="app.diagrams.net" modified="2023-04-28T08:28:30.027Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/109.0.0.0 Safari/537.36" etag="-tUJmpJB7W0-lHp2x3tV" version="20.5.3" type="github">
  <diagram id="rYdwiMb5jvszhZctyrXV" name="第 1 页">
    <mxGraphModel dx="951" dy="763" grid="0" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="0" pageScale="1" pageWidth="1920" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="k7kp1MV-_mNu26BSV135-13" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="646" y="1897" width="501" height="269" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-74" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;strokeColor=default;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="1479" y="193" width="888" height="669" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-15" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="605" y="391" width="591" height="332" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-1" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="655" y="442" width="463" height="253" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-35" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="618" y="979" width="573" height="481" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-55" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="594" y="1849" width="854" height="689" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="k7kp1MV-_mNu26BSV135-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="YQscOVflWYW1QB9K6YFz-41">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1008.4444444444443" y="217.66666666666663" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1008" y="218" />
              <mxPoint x="1008" y="236" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-42" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.004;exitY=0.87;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;exitPerimeter=0;" edge="1" parent="1" source="YQscOVflWYW1QB9K6YFz-41" target="fc0Et_haitifpb5bSG0c-6">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1227" y="263" />
              <mxPoint x="1227" y="515" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="YQscOVflWYW1QB9K6YFz-41" value="客户端（cluster模式）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="747.25" y="200" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-37" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-2" target="k7kp1MV-_mNu26BSV135-29">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="738" y="453" />
              <mxPoint x="873" y="453" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-2" value="master0&lt;br&gt;IP:192.168.0.2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="666" y="468" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-3" value="slave0&lt;br&gt;IP:192.168.0.3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="668" y="593" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-4" value="master1&lt;br&gt;IP:192.168.0.4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="855" y="473" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-5" value="slave1&lt;br&gt;IP:192.168.0.5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="857" y="598" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-6">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1228" y="513" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1074" y="539" />
              <mxPoint x="1228" y="539" />
              <mxPoint x="1228" y="514" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-6" value="master2&lt;br&gt;IP:192.168.0.6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1003" y="473" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-7" value="slave2&lt;br&gt;IP:192.168.0.7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1005" y="598" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-13" value="6 connection refused: podIP网络不通，无法建立连接" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1230" y="526" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-16" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1127.25" y="398" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-27" target="fc0Et_haitifpb5bSG0c-37" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-27" value="客户端（单节点模式）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="787.25" y="819" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-28" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="664.25" y="1188" width="463" height="253" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-29" value="master0&lt;br&gt;IP:192.168.0.2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="675.25" y="1214" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-30" value="slave0&lt;br&gt;IP:192.168.0.3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="677.25" y="1339" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-31" value="master1&lt;br&gt;IP:192.168.0.4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="864.25" y="1219" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-32" value="slave1&lt;br&gt;IP:192.168.0.5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="866.25" y="1344" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-33" value="master2&lt;br&gt;IP:192.168.0.6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1012.25" y="1219" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-34" value="slave2&lt;br&gt;IP:192.168.0.7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="1014.25" y="1344" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-36" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1122" y="985" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-37" target="fc0Et_haitifpb5bSG0c-38" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.639;entryY=0.983;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-37" target="fc0Et_haitifpb5bSG0c-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-37" value="LB&lt;br&gt;externalIP:10.0.0.2" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="838" y="986" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-46" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.489;entryY=0.441;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" parent="1" source="fc0Et_haitifpb5bSG0c-38" target="fc0Et_haitifpb5bSG0c-35" edge="1">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-45" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-38" target="fc0Et_haitifpb5bSG0c-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-38" value="proxy" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#008a00;strokeColor=#005700;fontColor=#ffffff;" parent="1" vertex="1">
          <mxGeometry x="838" y="1081" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-39" value="1 客户端访问LB&lt;br&gt;发送命令" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="806" y="916" width="90" height="24" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-40" value="2 proxy负责key的哈希&lt;br&gt;和命令转发" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="812" y="1156" width="72" height="17" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-15" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.486;entryY=-0.005;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-47" target="k7kp1MV-_mNu26BSV135-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-47" target="fc0Et_haitifpb5bSG0c-47">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1094" y="1638.111111111111" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1055" y="1638" />
              <mxPoint x="1055" y="1657" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-47" value="客户端（cluster模式）" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="779.25" y="1620" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-48" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="646.75" y="2203.5" width="492" height="313" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-20" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-49">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="540" y="2295" as="targetPoint" />
            <Array as="points">
              <mxPoint x="658" y="2318" />
              <mxPoint x="540" y="2318" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-49" value="master0&lt;br&gt;addr:192.168.0.2:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6379" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="657.75" y="2229.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-56" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" parent="1" vertex="1">
          <mxGeometry x="1385" y="1845" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-60" value="slave0&lt;br&gt;addr:192.168.0.3:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6380" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="657.75" y="2370.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1225" y="2290" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1111" y="2327" />
              <mxPoint x="1225" y="2327" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-61" value="master2&lt;br&gt;addr:192.168.0.6:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6579" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="980.5" y="2229.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-62" value="slave0&lt;br&gt;addr:192.168.0.7:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6580" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="980.5" y="2370.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-63" value="master1&lt;br&gt;addr:192.168.0.4:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6479" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="817.75" y="2229.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-64" value="slave1&lt;br&gt;Addr:192.168.0.5:6379&lt;br&gt;clusterAnnounceAddr: 10.0.0.1:6480" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" parent="1" vertex="1">
          <mxGeometry x="817.75" y="2370.5" width="130" height="130" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-65" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1056.75" y="2207.5" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-66" value="1 operator创建main-sub LB service，根据externalIP和externalPort设置redis的clusterAnnounceAddr" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1227" y="1975" width="201.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-67" value="3 计算key的哈希，确定命令转发节点：&lt;br&gt;根据key的哈希值和集群拓扑确定要访问的redis节点" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1062" y="1639" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-68" value="4 命令转发：与对应节点建立连接，发送命令" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1230" y="2107" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-69" value="5 clusterAnnounceAddr是客户端可访问的公网地址，建立连接成功，redis返回命令响应" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="1223" y="2313" width="183" height="30" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-70" value="2 服务发现：&lt;br&gt;客户端请求获取redis集群拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" parent="1" vertex="1">
          <mxGeometry x="460" y="2123" width="86" height="40" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-1" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-72" target="fc0Et_haitifpb5bSG0c-75">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-2" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-72" target="fc0Et_haitifpb5bSG0c-76">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="888" y="1998" />
              <mxPoint x="888" y="1998" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-3" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-72" target="fc0Et_haitifpb5bSG0c-78">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="888" y="1990" />
              <mxPoint x="1038" y="1990" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-72" value="main-LB&lt;br&gt;externalIP:10.0.0.1" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="827.75" y="1908" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-4" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-75" target="fc0Et_haitifpb5bSG0c-49">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="542" y="2041" />
              <mxPoint x="542" y="2295" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-75" value="sub-LB&lt;br&gt;externalPort:6379" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="680.88" y="2011" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-9" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-76" target="fc0Et_haitifpb5bSG0c-63">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="813" y="2041" />
              <mxPoint x="813" y="2172" />
              <mxPoint x="883" y="2172" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-76" value="sub-LB&lt;br&gt;externalPort:6479" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="822.88" y="2011" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-11" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;dashed=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-78" target="fc0Et_haitifpb5bSG0c-61">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1222" y="2039" />
              <mxPoint x="1222" y="2295" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-78" value="sub-LB&lt;br&gt;externalPort:6579" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="978.13" y="2009" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-7" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-79" target="fc0Et_haitifpb5bSG0c-60">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="625" y="2122" />
              <mxPoint x="625" y="2436" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-79" value="sub-LB&lt;br&gt;externalPort:6380" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="682.88" y="2092" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-10" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-80" target="fc0Et_haitifpb5bSG0c-64">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-80" value="sub-LB&lt;br&gt;externalPort:6480" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="824.88" y="2092" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-12" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-81" target="fc0Et_haitifpb5bSG0c-62">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1161" y="2120" />
              <mxPoint x="1161" y="2436" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="fc0Et_haitifpb5bSG0c-81" value="sub-LB&lt;br&gt;externalPort:6580" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a917;strokeColor=#2D7600;fontColor=#ffffff;dashed=1;dashPattern=1 1;" parent="1" vertex="1">
          <mxGeometry x="980.13" y="2090" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-19" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.543;entryY=1.016;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-13" target="fc0Et_haitifpb5bSG0c-47">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="900" y="1897" />
              <mxPoint x="900" y="1861" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-14" value="NLB" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1078.75" y="1906" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-18" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.999;entryY=0.369;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-17" target="k7kp1MV-_mNu26BSV135-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-17" value="redis-operator" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="1294.5" y="1885" width="134" height="72" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-21" value="2.1 redis返回集群拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="534" y="2329" width="96" height="14" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-22" value="2.2&amp;nbsp; 客户端缓存集群拓扑，此时集群拓扑里的redis节点地址是公网地址，客户端可直接访问" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="902" y="1728" width="134" height="24" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-27" value="6 客户端接收命令响应" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="873.75" y="1800" width="183" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-31" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.169;entryY=0.238;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-29" target="fc0Et_haitifpb5bSG0c-15">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-34" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.75;exitY=0;exitDx=0;exitDy=0;entryX=0.572;entryY=1.002;entryDx=0;entryDy=0;entryPerimeter=0;dashed=1;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-29" target="YQscOVflWYW1QB9K6YFz-41">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-29" value="NodePort或LB" style="text;html=1;strokeColor=default;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="828" y="378" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-32" value="1 服务发现：&lt;br&gt;客户端请求获取redis集群拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="771" y="311" width="86" height="40" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-35" value="3&amp;nbsp; 客户端缓存集群拓扑，此时集群拓扑里的redis节点地址是PodIP，客户端无法直接访问" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="873.75" y="327" width="143.25" height="24" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-36" value="2 redis返回集群拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="750" y="460" width="96" height="31" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-38" value="4 计算key的哈希，确定命令转发节点：&lt;br&gt;根据key的哈希值和集群拓扑确定要访问的redis节点" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1014.25" y="193" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-41" value="5 命令转发：与对应节点建立连接，发送命令" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1230" y="342" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-46" value="" style="endArrow=classic;html=1;rounded=0;dashed=1;entryX=0.75;entryY=1;entryDx=0;entryDy=0;exitX=0.571;exitY=0.001;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="fc0Et_haitifpb5bSG0c-28" target="fc0Et_haitifpb5bSG0c-38">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="907" y="1218" as="sourcePoint" />
            <mxPoint x="957" y="1168" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-47" value="1 LB将流量转发至proxy" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="791" y="1051" width="100" height="24" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-48" value="3 redis返回命令响应" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="933" y="1156" width="72" height="17" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-49" value="4 客户端接收redis命令响应" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="931" y="923" width="79" height="17" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-51" value="" style="rounded=0;whiteSpace=wrap;html=1;fillColor=none;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="1567" y="482" width="591" height="332" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-50" value="" style="rounded=1;whiteSpace=wrap;html=1;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="1617" y="533" width="463" height="253" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-52" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;dashed=1;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-55" target="k7kp1MV-_mNu26BSV135-57">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1820" y="469" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-53" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;dashed=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-55" target="k7kp1MV-_mNu26BSV135-55">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="1970.4444444444443" y="308.66666666666663" as="targetPoint" />
            <Array as="points">
              <mxPoint x="1970" y="309" />
              <mxPoint x="1970" y="327" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1.004;exitY=0.87;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;dashed=1;exitPerimeter=0;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-55" target="k7kp1MV-_mNu26BSV135-62">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="2189" y="354" />
              <mxPoint x="2189" y="606" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-55" value="客户端（cluster模式）&lt;br&gt;IP: 192.168.0.8" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#b1ddf0;strokeColor=#10739e;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="1709.25" y="291" width="221.5" height="72" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-56" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0;exitDx=0;exitDy=0;entryX=0.568;entryY=0.995;entryDx=0;entryDy=0;dashed=1;entryPerimeter=0;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-57" target="k7kp1MV-_mNu26BSV135-55">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="1687" y="571" />
              <mxPoint x="1687" y="544" />
              <mxPoint x="1835" y="544" />
            </Array>
            <mxPoint x="1835" y="499" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-57" value="master0&lt;br&gt;IP:192.168.0.2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1628" y="559" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-58" value="slave0&lt;br&gt;IP:192.168.0.3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1630" y="684" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-59" value="master1&lt;br&gt;IP:192.168.0.4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1817" y="564" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-60" value="slave1&lt;br&gt;IP:192.168.0.5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1819" y="689" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-61" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=1;exitDx=0;exitDy=0;dashed=1;" edge="1" parent="1" source="k7kp1MV-_mNu26BSV135-62">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="2190" y="604" as="targetPoint" />
            <Array as="points">
              <mxPoint x="2036" y="630" />
              <mxPoint x="2190" y="630" />
              <mxPoint x="2190" y="605" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-62" value="master2&lt;br&gt;IP:192.168.0.6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1965" y="564" width="83" height="83" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-63" value="slave2&lt;br&gt;IP:192.168.0.7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;fillColor=#008a00;fontColor=#ffffff;strokeColor=#005700;" vertex="1" parent="1">
          <mxGeometry x="1967" y="689" width="84" height="84" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-64" value="6 建立连接成功，redis返回命令响应" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2192" y="617" width="155" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-65" value="K8s集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="2089.25" y="489" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-69" value="1 服务发现：&lt;br&gt;客户端请求获取redis集群拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1733" y="402" width="86" height="40" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-70" value="3&amp;nbsp; 客户端缓存集群拓扑，此时集群拓扑里的redis节点地址与客户端在同一个子网内，客户端可以直接访问" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1835.75" y="418" width="154.25" height="24" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-71" value="2 redis返回集群拓扑" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1712" y="551" width="96" height="31" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-72" value="4 计算key的哈希，确定命令转发节点：&lt;br&gt;根据key的哈希值和集群拓扑确定要访问的redis节点" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="1976.25" y="284" width="111" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-73" value="5 命令转发：与对应节点建立连接，发送命令" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="2192" y="433" width="122" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-75" value="subnet&lt;br&gt;（BGP或OVS实现）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="2259" y="198" width="117" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-79" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="2001.75" y="534" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-80" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="1040.13" y="445" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="k7kp1MV-_mNu26BSV135-81" value="redis集群" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;dashPattern=1 1;" vertex="1" parent="1">
          <mxGeometry x="1050.5" y="1188" width="60" height="30" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
